// https://goo.gl/McP2dy | (c)2016 ChanMyeong | MIT license.
!function(t){"use strict";t.fn.josa=function(e){this.each(function(){var n,s=t(this),a=s.is("input"),i=s.is("select"),c=":selected";n=a?s.val():i?s.find(c).val():s.text();var o=function(){var t,a=s.next(),i=n.replace(/[^가-힣a-z\d]/gi,""),c=/[가-힣]$/.test(i)&&(i.substr(-1).charCodeAt(0)-44032)%28>0||/[가-힣]\d*[013678]$/.test(i)||/[a-z]\d*[1789]$/i.test(i)||/([clmnp]|[blnt](e)|[co](k)|[aeiou](t)|mb|ng|lert)$/i.test(i),o=function(n){t="이/가"===e?n[0]:"을/를"===e?n[1]:"은/는"===e?n[2]:"와/과"===e?n[3]:"로/으로"===e?n[4]:""};/([가-힣]|\d|[a-z])$/i.test(i)?c?o(["이","을","은","과","으로"]):c||o(["가","를","는","와","로"]):o(["이(가)","을(를)","은(는)","와(과)","로(으로)"]),a.is(".josa")?a.text(t):s.after("<span class='josa'>"+t+"</span>")};o(),(a||i)&&s.on("keyup change",function(){a?n=s.val():i&&(n=s.find(c).val()),o()})})}}(jQuery);