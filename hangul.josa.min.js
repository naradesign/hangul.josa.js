// https://goo.gl/prsTuL | (c)2016 ChanMyeong | MIT license.
!function(t){"use strict";t.fn.josa=function(e){this.each(function(){var n,a=t(this),s=a.is("input"),i=a.is("select"),c=":selected";n=s?a.val():i?a.find(c).val():a.text();var o=function(){var t,s=a.next(),i=n.replace(/\(.*\)/gi,"").replace(/[^가-힣a-z\d]/gi,""),c=/[가-힣]$/.test(i)&&(i.substr(-1).charCodeAt(0)-44032)%28>0||/[가-힣]\d*[013678]$/.test(i)||/[a-z]\d*[1789]$/i.test(i)||/([clmnp]|[blnt](e)|[co](k)|[aeiou](t)|mb|ng|lert)$/i.test(i),o=function(n){t="이/가"===e?n[0]:"을/를"===e?n[1]:"은/는"===e?n[2]:"와/과"===e?n[3]:"로/으로"===e?n[4]:""};/([가-힣]|\d|[a-z])$/i.test(i)?c?o(["이","을","은","과","으로"]):c||o(["가","를","는","와","로"]):o(["이(가)","을(를)","은(는)","와(과)","로(으로)"]),s.is(".josa")?s.text(t):a.after("<span class='josa'>"+t+"</span>")};o(),(s||i)&&a.on("keyup change",function(){s?n=a.val():i&&(n=a.find(c).val()),o()})})}}(jQuery);